---
title: "Midterm I"
author: "Erica"
date: "10/10/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(nycflights13)
```

# First Coding Problem
## I think there is a way to combine the steps in this next chunk but I couldn't figure it out.

```{r}
destinations <- flights %>% 
  filter(dest %in% c("ATL", "BOS"))

arrivals <- destinations %>% 
  filter(arr_time, (abs(sched_arr_time - arr_time) <= 30))
```

## Here is the code for the graph

```{r}
arrivals %>% 
ggplot(aes(origin, arr_delay)) +
  geom_violin(aes(fill = origin), show.legend = FALSE) +
  geom_boxplot(width = 0.25, fill = "grey") +
  facet_grid("dest") +
  coord_flip() +
  labs(
    title = "First Coding Problem",
    subtitle = "NYC 2013 Flights Within 30 Minutes of Scheduled Arrival",
    x = "Origin",
    y = "Arrival Delay")
```

### I don't know why LGA's flights to BOS are short

# Second Coding Problem
## Tidyverse and flights are already loaded
## I'm sure there is a way to combine these two, too; but I don't know how.

```{r}
non_cancelled <- flights %>% 
  filter(!is.na(dep_delay)) %>% 
  filter(!is.na(arr_delay))
#gets rid of cancelled flights

early_birds <- non_cancelled %>% 
  group_by(origin) %>% 
  filter(dep_time < sched_dep_time)
#all the non-cancelled flights that left early
```

## This is how you generate the bar chart
### These aren't actually my 6th attempts, more like my 40th.
```{r}
take6 <- early_birds %>%
  group_by(origin) %>%
  summarize(on_time_percentage = (mean(arr_time <= sched_arr_time))*100) %>%
  arrange(desc(on_time_percentage))

take6 %>% 
  ggplot(aes(origin, on_time_percentage, fill = origin)) +
  geom_col(show.legend = FALSE) +
  scale_y_continuous() +
  labs(
    title = "Second Coding Problem",
    subtitle = "Bar Chart (Pareto) of Percentage On Time",
    x = "",
    y = "Percentage"
  )
```

