---
title: 'Key Homework #3'
author: "Grammar of Graphics"
date: "Due: 21 Jan 2021"
output:
  html_document:
    code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      message = FALSE,
                      warning = FALSE)
library(tidyverse)
```

## Concepts

Define and explain each of the seven parts of the layered grammar of graphics.

Data: identifies the primary data set that provides the data for the graph.

Aesthetics: the assignment of x-axis, y-axis, color, fill, stroke, linetype, shape, size, and transparency to variables in the data frame. This is a set of mappings.

Geoms: Creates a series of layers which contain a type of graph.

Stats: Some types of graphs require calculations before the graph can be drawn. For example, geom_smooth requires the calculation of loess or other types of smoothing such as simple linear regression. The geom_bar requires counting the frequency of each category in the variable.

Position: alters the presentation of the data. The geom_bar can have position of identity, fill, or dodge. In order to show all points in a scatterplot, we use the geom_scatter or us a position = "jitter" in the geom_point part of the function call.

Coordinate System: Changes the coordinate system. The coord_flip swaps the x and y axes. It can also be used to change from the default cartesian to polor coordinates.

Facet: Creates a separate graph for each value in a categorical variable or a separate graph for a range of values for numerical variables. This might also be seen as splitting a graph into subplots.

## Interpretation of code

```{r code chunk}
ggplot(data = mpg, mapping = aes(x = class, fill = class)) +
  geom_bar() +
  facet_wrap(vars(drv), ncol = 1)
```

Line 1: sets up the regular ggplot parameters by identifying the data set. The categorical variable class is identified as the variable that is being analyzed.

Line 2: Creates a layer that includes a bar chart. From the first line, the color of each bar is determined by the class categorical variable. The function call inherent in geom_bar counts the number of observations in each category for the class variable.

Line 3: Creates a separate bar chart for each value of the drv variable. There is only one column so the bar charts are stacked one above the other.

## Using the mpg tibble, draw a smoothed scatterplot for each different drive train.

1.  Put displ on the x-axis and hwy on the y-axis.
2.  Color the points in the scatterplots by the class of the vehicle.
3.  Use facet_grid to create a graph for each different type of drive train.
4.  Draw the smoothed line for all of the points in each subplot.
5.  Suppress the confidence interval on the loess smoothed line.

```{r facets}
ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = class)) +
  geom_point() +
  geom_smooth(color = "blue", se = FALSE) +
  facet_grid(rows = vars(drv))
```
