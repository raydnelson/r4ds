---
title: 'Key Homework #4'
author: "Ray Nelson"
date: "1/16/2019"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

## Concepts  

Explain the sequence whereby a word file is created from a R Markdown document. What is the purpose of the YAML header?  

In the YAML header, we specify the desired type of document(HTML, PDF, or WORD) document. When we knit the file, the knitr library converts the R Markdown file into a markdown file. The markdown file is then processed into pdf, html, or word files by using the pandoc library.  

The YAML header specifies the stucture of the whole document. It include title, author, date, and other information. The most important part is the declaration of the type of document to be created: html, pdf, or word. If the purpose of the R Markdown file is a presentation, then it can be ioslides, slidy, pdf(beamer), or PowerPoint. 

## Interpretation of code  

Interpret the following R code:  

```{r code chunk 1, message = FALSE}
ggplot(data = faithful, mapping = aes(x = eruptions)) +
  geom_histogram(aes(y = stat(density)), fill = "lightgreen") +
  geom_density(fill = "blue", alpha = 0.3) +
  geom_rug(color = "red")
``` 

The first line identifies the data set and maps eruptions to the x aesthetic.  

The second line creates a histogram for eruptions. The default calcultion of count for the geom_histogram is not compatible with geom_density in the following line. Therefore, we must use y = stat(density) in order to get compatible units of measure for the geom_histogram and the geom_density.  

The third line calculates a smoothed histogram (using a kernel smoother) and fills the area underneath the graph with blue which is plotted at 30% transparency so that we can see the histogram behind the density plot.  

The fourth line adds another layer to the graph. This layer puts tick marks for each observation along the x axis.  

```{r code chunk 2}
ggplot(data = mpg, mapping = aes(x = class, y = hwy, fill = class)) +
  geom_violin(show.legend = FALSE) +
  geom_boxplot(show.legend = FALSE, width = 0.05, fill = "grey")
```  
The first line calls the function ggplot with parameters that identify the dataframe (mpg) and maps the category class to the x variable and the highway miles per gallon to the y variable. Because fill = class occurs within the aesthetic, it will apply to all of the geometric objects that follow.  

The first layer includes the violin plot filled with colors that correspond to the class of the vehicle. No legend is needed because the violin plot has a categorical variable of class.

The second layer superimposes a boxplot on top of the violin geometric object. The width of the boxplot is 5% of the default width. The fill = "grey" supercedes the fill from the initial aes declaration.  

## Compare the distribution of city mileage from the mpg dataframe for each of the three different types of drive trains using:  

1.  Facets with a density superimposed on top of a histogram
1.  Violin plots

```{r facets, message = FALSE}
ggplot(data = mpg, mapping = aes(x = cty)) +
  geom_histogram(aes(y = stat(density))) +
  geom_density(fill = "lightblue", alpha = 0.5) +
  facet_grid(rows = vars(drv))
```

```{r violin plots}
mpg %>%
   ggplot(aes(x = drv, y = cty)) +
    geom_violin(fill = "lightgreen") +
    geom_boxplot(width = 0.25, fill = "lightblue") +
    labs(title = "Violin Plot",
      x = "Drive Train",
      y = "City Miles Per Gallon") +
    coord_flip()
```

