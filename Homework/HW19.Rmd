---
title: "HW19"
author: "Simple Models"
date: "25 November 2019"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      warning = FALSE,
                      message = FALSE)
library(tidyverse)
```

## Concepts  

1.  Explain what you think Hadley Wickham means by the following statement:

> The goal of a model is not to uncover truth, but to discover a simple approximation that is still useful.  

2.  Carefully explain what is meant by residuals and how they are related to the idea of explained and unexplained variation.
    
## Interpretation of code  

Code Chunk #1 Linear Regression

```{r linear regression and prediction}
mpg_lm <- lm(hwy ~ displ, data = mpg)
mpg_lm %>% str()
mpg_lm %>% coefficients()
mpg$displ %>%
  range()
mpg_lm %>%
  predict(newdata = tibble(displ = 5))
```

Code Chunk #2 Loess model

```{r loess model, message = FALSE}
mpg_loess <- loess(hwy ~ displ, data = mpg)
fitted_values <- mpg_loess %>%
  fitted()
studentized_residuals <- mpg_loess %>%
  residuals() %>% 
  scale() %>% 
  as.numeric()
tibble(fitted_values, studentized_residuals) %>% 
  ggplot(aes(fitted_values, studentized_residuals)) +
  geom_point() +
  geom_smooth()
tibble(studentized_residuals) %>% 
  filter(studentized_residuals < -3 | studentized_residuals > 3)
```  

## Write Code

Use the mtcars data frame to complete the following:

1.  Create an lm object called mtcars_lm that is the result of estimating a simple regression model of mpg on disp.
1.  Create a new vector called fitted_values by extracting the fitted values from mtcars_lm.
1.  Create a new vector called residuals_lm by finding the residuals in mtcars_lm.
1.  Create a new vector called studentized_residuals by turning residuals_lm  into z-scores.
1.  Create a tibble with fitted_values and studentized_residuals and then plot the studentized residuals on the fitted values. Smooth the scatterplot using loess.
1.  Create a tibble of studentized_residuals and then filter that tibble to find any studentized residuals that are outside the -2 thru +2 range.


```{r type of variables in flights}

```