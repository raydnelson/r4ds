---
title: 'Homework #5'
author: "Filtering and Arranging"
date: "Due: 27 Jan 2020"
output:  
  html_document:
    code_folding: hide
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      message = FALSE,
                      warning = FALSE)
library(tidyverse)
library(nycflights13)
```

## Concepts  

1.  Explain the differences among "=", "==", and "<-". Give an example of how you would use each of these symbols.

The common use of "=" is to assign values within a function call. Example: ggplot(data = mpg, mapping = aes(x = hwy))  

There should be no confusion about "==" since its use is to determine strict equality in comparisons. Example: filter(mpg, class == "compact")  

The preferred assignment operator is "<-". It will also work to use "=" as an assignment operator, but it is not consider good practice within the R community. Example:  x <- rnorm(n = 100, mean = 10, sd = 10)

2.  Compare and contrast the logical operators "x & y" and "xor(x, y)".

"x & y" is the intersection of the x and y or the common area in the Venn diagram.  

"xor(x, y)" is the area in the Venn diagram that includes everything but the common area or "x & y"

## Interpretation of code  

Interpret the following R code:  

```{r code chunk}
flights %>%
  filter(month == 5 | month == 9,
         carrier == "DL",
         dep_delay < 90) %>%
  ggplot(aes(
    x = as.factor(month),
    y = dep_delay,
    fill = as.factor(month)
  )) +
  geom_boxplot(show.legend = FALSE) +
  coord_flip() +
  facet_grid(rows = vars(origin))
```

Line 1: Identifies the initial data frame as flights

Lines 2 - 4: Creates a new data frame that includes all of the Delta flights in August or September with departure delays of less than 90 minutes

Lines 5 - 9: Pipes the data frame into the ggplot function. The variable month is mapped as the category value for the boxplots. Month must be converted into a factor in order for the geoms to work properly. The y or numerical value is the departure delay. We also use month as a category assigned to the fill aesthetic, which must also be converted into a factor since it is an integer.  

Line 10: Creates a layer for the boxplot, fills the box with a lightblue background, and suppresses the legend.

Line 11: Flips the x and y axes  

Line 12: Creates three different plots, one for each of the three origin airports in New York City.

## Coding Problem

Air time and distance travelled are undoubtedly positively related. Investigate this relationship for all April flights from JFK.

*  Filter the flights data frame to isolate the flights from JFK during April
*  Create a scatterplot
*  Use jittering and transparency to help with the overplotting.
*  Smooth with the default method (generalized additive model)
*  Smooth with a linear regression

```{r air time and distance travelled, message = FALSE, warning = FALSE}
flights %>%
  filter(month == 4, origin == "JFK") %>%
  ggplot(aes(x = distance, y = air_time)) +
  geom_point(position = "jitter", alpha = 1 / 100) +
  geom_smooth(color = "red") +
  geom_smooth(method = "lm", color = "blue")
```  

Destination might be a possible reason why we have clusters of data.  

Comparing the linear regression line with the loess smoothed line suggests that the relationship might not be linear.