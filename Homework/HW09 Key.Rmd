---
title: 'Homework #9 Key'
author: 'Covariation'
date: "Due: 10 Feb 2020"
output:
   html_document:
     code_folding: hide
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      warning = FALSE,
                      message = FALSE)
library(tidyverse)
```

## Concepts  

#### 1.  Explain how Tukey's five number summary is related to the boxplot.

The boxplot contains each of the element that comprise Tukey's five number summary:

1. *Minimum* is either an outlier or the end endcap on the lower whisker.
2. *First quartile* is the lower hinge on the box part of the boxplot.
3. *Median or second quartile* is the line in the middle of the boxplot.
4. *Third quartile* is the upper hinge on the box part of the boxplot
5. *Maximum* is either an outlier or the end endcap on the upper whisker.  


#### 2.  Identify at least five geom's that help you explore the covariation between two variables

1. Categorical and continuous
  * geom_boxplot
  * geom_violin
  * geom_freqpoly
2. Two categorical
  * geom_hex
  * geom_tile
3. Two continuous variables
  * geom_point
  * geom_smooth
  * geom_path
  * geom_line
  
#### 3. Explain how you can use violin plots to determine whether a distribution is symmetrical.

You can use boxplots to detect asymmetry in a distribution of a continuous variable in the following four ways:

1. The mean and the median don't line up.
2. The median is closer to either the upper hinge or lower hinge. With a symmetric distribution the median should be midway between the first and third quartiles.
3. The left and right whiskers aren't the same length.
4. Outliers exist only in either the left or right tail.

#### 4. Explain how you can use violin plots to determine whether a distribution has fat tail relative to the normal.

The thickness of the tails of a distribution are measured relative to the normal distribution. Tail thickness and kurtosis are an indicator of outliers. In the boxplot, the presence of a large number of outliers probably suggests thick tails.
    
## Interpretation of code  

```{r code chunk interpretation I}
mpg %>%
  ggplot(aes(x = reorder(class, cty, FUN = IQR), y = cty)) +
  geom_violin(fill = "lightgreen") +
  geom_boxplot(width = 0.1, fill = "lightblue") +
  labs(
    title = "Violin Plot of City Miles Per Gallon",
    x = "Class of Vehicle",
    y = "Miles Per Gallon") +
  coord_flip()
```  

Lines 1 - 2: initialize the ggplot by using the mpg data frame. Because we are going to draw a violin plot, we need a categorical variable for our x axis and a numerical variable for our y axis. The reordering in the aes specification means that we can to sort the order of our class variables based on the interquartile range of the city miles per gallon. We assign city miles per gallon to the y or numerical variable. The clause reorder(class, cty, FUN = IQR) means that we should reoder class using the IQR function applied to cty.  

Lines 3 - 4: create two layers, one for the violin shape and the other for the boxplot. The fill colors are light green and light blue. The width of the boxplot is diminished to 0.1 so that that the boxplots fit within the violin shapes.  

Lines 5 - 8: label the graph and the axis

Line 9: flips the x and y axes  

## Write code  

Use the mpg data frame and ggplot to investigate the covariation between

#### 1. Highway (hwy) and city (cty) mileage

```{r relationship between highway and city mileage}
mpg %>% 
  ggplot(aes(x = cty, y = hwy)) +
  geom_point() +
  geom_smooth(color = "blue") +
  geom_smooth(method = "lm", color = "red")

mpg %>%
  ggplot(aes(x = cty, y = hwy)) +
  stat_density_2d(aes(fill = stat(density)), geom = "raster", contour = FALSE) +
  labs(
    title = "Relationship between city and highway miles per gallon",
    x = "City Miles Per Gallon",
    y = "Highway Miles Per Gallon"
  )
```

#### 2. Highway mileage and drive train

```{r relationship betwen highway and drive train}
mpg %>% 
  ggplot(aes(x = reorder(drv, hwy, FUN = median), y = hwy, fill = drv)) +
  geom_boxplot(show.legend = FALSE) +
  coord_flip() +
  labs(
    title = "Front wheel drive cars get better highway mileage.",
    x = "Type of Drive Train",
    y = "Miles per gallon"
  )
```
